<app-toast-component #toast></app-toast-component>
<div class="text-center" id="tabla">
  <nav aria-label="PaginaciÃ³n">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="inicio === 0">
        <button class="page-link" (click)="retrocederUnaPagina()">Anterior</button>
      </li>
      <li class="page-item" [class.disabled]="!hayMasProyecciones()">
        <button class="page-link" (click)="avanzarUnaPagina()">Siguiente</button>
      </li>
    </ul>
  </nav>
  @if(proyecciones.length==0){
  <h2>Esta pelicula no tiene proyecciones disponibles, elige otro</h2>
  } @if(proyecciones.length>0){
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Cine</th>
        <th scope="col">Sala</th>
        <th scope="col">Fecha</th>
        <th scope="col">Hora de Inicio</th>
        <th scope="col">Hora de Finalizacion</th>
        <th scope="col">Precio de boleto</th>
        <th scope="col">Opiniones a pelicula</th>
        <th scope="col">Opiniones a sala</th>
        <th scope="col">Selecciona</th>
      </tr>
    </thead>
    <tbody>
      @for (proyeccion of proyecciones; track $index) { @if(proyeccion.disponible){
      <tr>
        <td>{{ proyeccion.sala.nombreCine }}</td>
        <td>{{ proyeccion.sala.nombre }}</td>
        <td>{{ proyeccion.fecha | date : 'dd MMMM yyyy' }}</td>
        <td>{{ proyeccion.horaInicio }}</td>
        <td>{{ proyeccion.horaFin }}</td>
        <td>{{ proyeccion.precio | currency : 'Q.' }}</td>
        <td>
          <a
            routerLink="/proyecciones-pelicula/opiniones/{{ proyeccion.pelicula.codigo }}/{{
              proyeccion.pelicula.titulo
            }}/true/{{ proyeccion.pelicula.codigo }}/{{ proyeccion.pelicula.titulo }}"
            class="btn btn-success"
          >
            <i class="bi bi-eye"></i>
          </a>
        </td>
        <td>
          <a
            routerLink="/proyecciones-pelicula/opiniones/{{ proyeccion.sala.codigo }}/{{
              proyeccion.sala.nombre
            }}/false/{{ proyeccion.pelicula.codigo }}/{{ proyeccion.pelicula.titulo }}"
            class="btn btn-success"
          >
            <i class="bi bi-eye"></i>
          </a>
        </td>
        <td>
          <a
            routerLink="/proyecciones-de-pelicula/compra-boletos/{{ proyeccion.codigo }}"
            class="btn btn-warning"
          >
            <i class="bi bi-cart"> Comprar Boletos</i>
          </a>
        </td>
      </tr>
      } }
    </tbody>
  </table>
  }
</div>
